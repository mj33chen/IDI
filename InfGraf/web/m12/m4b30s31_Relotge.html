<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html lang="CA">
<head>
<title></title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<LINK REL="stylesheet" type="text/css" HREF="../upc.css" >
<script type="text/javascript" src="../upc.js"></script>
<BODY>
<br>

<div class=tit2> El rellotge en les animacions amb vrml'97 </div>

<p> Els rellotges (nodes TimeSensor) fan com de cronòmetres de la
nostra animació. Els podem posar en marxa i parar; mentre estan
funcionant, van enviant events a intervals de temps totalment
regulars. Aquests events ens serviran per activar els motors de les
diferents animacions que volguem produir a l'escena. Els camps d'un
node de tipus <b>TimeSensor</b> són:

<ul>
<li> startTime: indica quan s'ha de posar en marxa el rellotge (vegeu
l'exemple al final) </li>

<li> stopTime: indica quan s'ha de parar el rellotge </li>

<li> cycleInterval: indica el temps en segons que tindrem entre quan
es posa en marxa i quan es para perquè acaba un cicle </li>

<li> loop: indica si volem que funcioni un sol cop, o bé de forma
reiterada i indefinida </li>
</ul>

<p> Un node de tipus <b>TimeSensor</b> genera events de temps absoluts
i fraccionals a la vegada. Els events de temps absoluts són menys
usats, i donen el temps absolut, en segons, comptats a partir del 1 de
gener del 1970 (ens podrien servir si volem que una part de l'animació
comenci a funcionar en un instant precís del temps -dia i hora-). Els
events de temps fraccional són els que usarem en quasi totes les
animacions, i ens donen un valor real (float) entre 0.0 i 1.0. Quan el
rellotge comença ens genera un event de valor 0.0, en acabar un cicle
ens genera un event de valor 1.0, i mentre està en marxa ens genera
events fraccionals (entre 0. i 1.)  durant <b>cycleInterval</b>
segons.


<p> Com veiem en els dos exemples de definició de rellotge que
presentem a continuació, els rellotges poden fer un sol cicle i
parar-se, o bé repetir el cicle de forma indefinida,

<p> Primer exemple: envia events que s'incrementen de 0.0 a 1.0 durant
10 segons, i torna a començar fent un bucle infinit (això es fa posant
loop TRUE i indicant un temps de stop més petit o igual que el de
start):

<pre class=algoritme>
DEF Relotge2 TimeSensor {
    cycleInterval 10.0
    loop TRUE
    startTime 0.0
    stopTime  -1.0
}
</pre>

<p> Segon exemple: envia events un sol cop durant 10 segons. Aquest
tipus de Time Sensors s'utilitzen associats a objectes que fan de
botons i que quan l'usuari fa click sobre ells, posen en marxa el node
<b>TimeSensor</b>. Aquests objectes han d'estar definits com a
<b>TouchSensor</b> posant, a la seva definició, "DEF NomObjecte
TouchSensor". Podeu veure un exemple al model vrml de rellotge que
teniu a la pàgina d'exercicis d'aquest apartat d'animació. Analitzeu
aquest exemple i observeu com es defineix i com s'utilitza el
<b>TimeSensor</b> a l'animació del rellotge:

<pre class=algoritme>
DEF Relotge TimeSensor {
    cycleInterval 4.0
    loop FALSE
    startTime 0.0
    stopTime  0.1
}
</pre>

<p align=right><a href="javascript:window.close()">tornar </a>
</body>
</html>
